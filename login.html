<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - Plataforma Poisson</title>
  <link rel="stylesheet" href="style/global.css">
  <link rel="stylesheet" href="style/navbar.css">
  <link rel="stylesheet" href="style/footer.css">
  <link rel="stylesheet" href="style/login.css">
</head>

<body>
  <header id="cabecalho"></header>
  <main>
  <div class="login__container">
    <h1 class="login__titulo">Login</h1>
    <p class="login__descricao">Entre para acessar as análises da plataforma</p>

    <input type="email" placeholder="Email" class="login__campo" />
    <input type="password" placeholder="Senha" class="login__campo" />

    <a href="perfil.html">
      <button class="login__botao">Entrar</button>
    </a>

    <div class="login__recuperar-senha">
      <a href="esqueci-senha.html">Esqueci a senha</a>
    </div>

    <div class="login__alternar-acesso">
      Não tem conta? <a href="cadastro.html">Cadastre-se</a>
    </div>
  </div>
</main>


  <footer class="rodape" id="rodape"></footer>
  <script src="layout.js"></script>
  <script type="module">
    import { loginUser } from "../js/auth.js";

    const form = document.getElementById("loginForm");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const payload = {
            login: document.getElementById("login").value,
            password: document.getElementById("password").value
        };

        const result = await loginUser(payload);
        console.log(result);

        if (result?.data?.token) {
            localStorage.setItem("token", result.data.token); 
            alert("Login realizado com sucesso!");
        }
    });
</script>

</body>

</html>